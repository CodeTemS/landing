---
const rutas = {
  "Culiacán - Tijuana": [
    { hora: "08:00 AM", servicio: "Plus", precio: 1600 },
    { hora: "12:30 PM", servicio: "Star de Lujo", precio: 1700 },
    { hora: "04:00 PM", servicio: "Diamante", precio: 1900 }
  ],
  "Guamúchil - Mexicali": [
    { hora: "10:30 AM", servicio: "Star de Lujo", precio: 1600 }
  ],
  "Los Mochis - Navojoa": [
    { hora: "01:00 PM", servicio: "Duo", precio: 1600 },
    { hora: "08:30 PM", servicio: "Plus", precio: 1500 }
  ],
  "Tijuana - Culiacán": [
    { hora: "06:00 AM", servicio: "Plus", precio: 1600 },
    { hora: "02:00 PM", servicio: "Diamante", precio: 1900 }
  ]
};
---

<section class="py-10 bg-white">
  <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6 text-center">HORARIOS</h1>
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {Object.entries(rutas).map(([ruta, horarios], index) => (
      <details class="bg-blue-700 shadow-lg rounded-2xl p-6 flex flex-col justify-between group transition-all duration-300">
        <summary class="flex justify-between items-center cursor-pointer text-lg font-bold text-white mb-2 list-none
        transition-transform duration-300">
          {ruta}
          <span class="inline-block transition-transform duration-300 group-open:rotate-180">▼</span>
        </summary>
        <div class="mt-2 space-y-3 max-h-0 overflow-hidden transition-all duration-300 group-open:max-h-[1000px]">
          {horarios.map((h) => (
            <div class="flex justify-between items-center bg-gray-50 rounded-xl shadow p-4">
              <div>
                <p class="text-lg font-medium text-gray-800">{h.hora}</p>
                <p class="text-sm text-gray-500">Servicio: {h.servicio}</p>
              </div>
              <div>
                <span class="text-lg font-bold text-blue-600">${h.precio}</span>
              </div>
            </div>
          ))}
        </div>
      </details>
    ))}
  </div>
</section>

<script type="module" client:load>
  // Solo un card abierto a la vez
  const detalles = document.querySelectorAll("details");

  detalles.forEach(detalle => {
    detalle.addEventListener("click", () => {
      detalles.forEach(d => {
        if (d !== detalle) {
          d.removeAttribute("open");
        }
      });
    });
  });
</script>
